# ğŸ“¦ í”„ë¡œì íŠ¸ ê°œìš”: YunMin-EfficientData

**YunMin-EfficientData**ëŠ” YunMin-Mambaì˜ ì„±ëŠ¥ì„ ë’·ë°›ì¹¨í•  ê³ íš¨ìœ¨ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ ìµœì‹  ê¸°ìˆ ì„ í†µí•© ì ìš©í•©ë‹ˆë‹¤:

1. **SlimPajama ê¸°ë°˜ ì¤‘ë³µ ì œê±° (Deduplication)**
2. **Youmu ê¸°ë°˜ ì»¬ëŸ¼í˜• ê³ ì„±ëŠ¥ ë°ì´í„° ë¡œë”©**
3. **DEM (Data Efficiency Method) ê¸°ë°˜ ë‹¤ì¤‘ ë°ì´í„°ì…‹ í•™ìŠµ ìµœì í™”**

---

## ğŸ§­ í”„ë¡œì íŠ¸ ëª©í‘œ

* í•œêµ­ì–´ ëŒ€ê·œëª¨ ë§ë­‰ì¹˜ì— ëŒ€í•œ **ì •ì œ(deduplication)Â·ìµœì í™”Â·íš¨ìœ¨ì  í•™ìŠµ êµ¬ì¡°í™”**ë¥¼ ìˆ˜í–‰í•œë‹¤.
* ìµœëŒ€í•œ ì ì€ ë¹„ìš©ìœ¼ë¡œ **ìµœëŒ€ì˜ ì„±ëŠ¥ í–¥ìƒ**ì„ ì´ëŒì–´ë‚¸ë‹¤.
* ì¶”í›„ YunMin-Mamba 3B/7Bì˜ ì‚¬ì „í•™ìŠµ ë˜ëŠ” SFTì— ì‚¬ìš© ê°€ëŠ¥í•œ **ë²”ìš© ê³ íš¨ìœ¨ ë°ì´í„° í¬ë§·**ì„ ìƒì‚°í•œë‹¤.

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
YunMin-efficient-data/
â”œâ”€â”€ data/                      # ë°ì´í„° ì €ì¥ (raw, ì¤‘ë³µ ì œê±°, parquet)
â”‚   â”œâ”€â”€ raw/                  # ì›ë³¸ JSONL ë°ì´í„° (from S3 or local)
â”‚   â”œâ”€â”€ dedup_ready/          # ì •ì œëœ JSONL íŒŒì¼
â”‚   â”œâ”€â”€ deduped/              # ì¤‘ë³µ ì œê±° ì™„ë£Œ íŒŒì¼
â”‚   â””â”€â”€ parquet/              # ì—´ ê¸°ë°˜ Parquet í¬ë§· ë³€í™˜ ê²°ê³¼
â”‚
â”œâ”€â”€ models/                   # ëª¨ë¸ ì²´í¬í¬ì¸íŠ¸ ë° ë³‘í•© ê²°ê³¼
â”‚   â”œâ”€â”€ base/                 # ì‚¬ì „í•™ìŠµëœ YunMin-Mamba base ëª¨ë¸
â”‚   â”œâ”€â”€ lora_<domain>/        # ë„ë©”ì¸ë³„ LoRA adapter weight
â”‚   â””â”€â”€ merged/               # DEM ë³‘í•© ê²°ê³¼ ëª¨ë¸
â”‚
â”œâ”€â”€ dedup/                    # SlimPajama ê¸°ë°˜ ì¤‘ë³µ ì œê±° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ slimpajama_dedup.py  # ë©”ì¸ ì¤‘ë³µ ì œê±° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ minhash_utils.py     # MinHash + LSH ì²˜ë¦¬ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ cluster_reduction.py # ëŒ€í‘œ ë¬¸ì„œ ì„ íƒ ë¡œì§
â”‚   â””â”€â”€ stats_analysis.ipynb # ì¤‘ë³µë¥  ì‹œê°í™” ë° í†µê³„ ë¶„ì„
â”‚
â”œâ”€â”€ format/                   # Youmu í¬ë§· ë³€í™˜ (JSONL â†’ Parquet)
â”‚   â”œâ”€â”€ to_parquet.py        # ë³€í™˜ ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ parquet_utils.py     # schema ì§€ì • ë° ì—´ í•„í„°ë§ ìœ í‹¸
â”‚   â””â”€â”€ parquet_profile.ipynb # í¬ë§·ë³„ ì†ë„/ìš©ëŸ‰ ë¶„ì„ notebook
â”‚
â”œâ”€â”€ dem/                      # Data Efficiency Method í•™ìŠµ ë° ë³‘í•©
â”‚   â”œâ”€â”€ train_individual.py  # ë„ë©”ì¸ë³„ LoRA ë¯¸ì„¸ì¡°ì • ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ vector_diff.py       # baseì™€ì˜ ì°¨ì´ ë²¡í„° ê³„ì‚°
â”‚   â”œâ”€â”€ merge_model.py       # diff vector ë³‘í•© ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ diff_analysis.ipynb  # diff ë²¡í„° norm ë° ì‹œê°í™” notebook
â”‚
â”œâ”€â”€ evaluation/               # Phase 4: ì„±ëŠ¥ í‰ê°€ ë° ë¹„êµ
â”‚   â”œâ”€â”€ compute_metrics.py   # PPL, BLEU, ROUGE ë“± ì§€í‘œ ê³„ì‚°ê¸°
â”‚   â”œâ”€â”€ eval_prompts.jsonl   # ë¹„êµìš© prompt ë¦¬ìŠ¤íŠ¸ (10~100ê°œ)
â”‚   â”œâ”€â”€ eval_runner.py       # base vs merged ì‘ë‹µ ìƒì„± ë° ë¹„êµ
â”‚   â”œâ”€â”€ summarize_eval.ipynb # í‰ê°€ ìˆ˜ì¹˜ ë¶„ì„ ë° í‘œ ê·¸ë¦¬ê¸°
â”‚   â””â”€â”€ scoring_rules.yaml   # ì •ì„± í‰ê°€ ê¸°ì¤€ ì •ì˜
â”‚
â”œâ”€â”€ scripts/                  # ì‹¤í–‰ ìë™í™” ë° ê³µí†µ ìœ í‹¸
â”‚   â”œâ”€â”€ run_pipeline.sh      # ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup_env.sh         # venv, requirements ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ test_loading_speed.py# parquet vs jsonl I/O ë²¤ì¹˜ë§ˆí¬
â”‚
â”œâ”€â”€ configs/                  # ì„¤ì • íŒŒì¼ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ dataset_config.yaml  # S3 ê²½ë¡œ, ì—´ ëª…ì„¸, í† í°í™” ì„¤ì • ë“±
â”‚   â”œâ”€â”€ dem_config.yaml      # DEM ê°€ì¤‘ì¹˜ ì„¤ì •
â”‚   â””â”€â”€ logging.yaml         # ë¡œê¹… í¬ë§· ë° ë ˆë²¨
â”‚
â”œâ”€â”€ docs/                     # ë¬¸ì„œ ë° ë¦¬í¬íŠ¸
â”‚   â”œâ”€â”€ architecture.md      # ì „ì²´ ì‹œìŠ¤í…œ ì„¤ê³„ ê°œìš”
â”‚   â”œâ”€â”€ tasks.md             # ë‹¨ê³„ë³„ granular task ëª©ë¡
â”‚   â”œâ”€â”€ phase1.md            # ì¤‘ë³µ ì œê±° ìƒì„¸ ê³„íš
â”‚   â”œâ”€â”€ phase2.md            # í¬ë§· ë³€í™˜ ìƒì„¸ ê³„íš
â”‚   â”œâ”€â”€ phase3.md            # DEM í•™ìŠµ ìƒì„¸ ê³„íš
â”‚   â”œâ”€â”€ phase4.md            # ì„±ëŠ¥ í‰ê°€ ìƒì„¸ ê³„íš
â”‚   â””â”€â”€ report.md            # ìµœì¢… ì„±ëŠ¥ ë³´ê³ ì„œ
â”‚
â”œâ”€â”€ tests/                    # PyTest ê¸°ë°˜ ìœ ë‹› í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_dedup.py        # dedup ê´€ë ¨ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_format.py       # parquet ë³€í™˜ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_dem.py          # diff vector ë³‘í•© ê²€ì¦
â”‚   â””â”€â”€ test_eval.py         # ì§€í‘œ ê³„ì‚° ë° ì‘ë‹µ ë¹„êµ í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ requirements.txt         # Python íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ .env.example             # í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md```

---

## ğŸ” ê° ê¸°ìˆ  ì ìš© ë°©ì‹

### 1. SlimPajama ê¸°ë°˜ ì¤‘ë³µ ì œê±°

* **ëª©í‘œ**: ë™ì¼/ìœ ì‚¬ ë¬¸ì¥ì˜ ë°˜ë³µì„ ì œê±°í•˜ì—¬ GPU ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ ë°©ì§€
* **ë°©ë²•**:

  * MinHash + LSHë¥¼ ì´ìš©í•œ ìœ ì‚¬ë„ ê¸°ë°˜ ì¤‘ë³µ ì œê±°
  * token-level N-gram ê¸°ë°˜ fingerprint ìƒì„±
  * ì¤‘ë³µë¥  0.8 ì´ìƒì¼ ê²½ìš° ì œê±°

### 2. Youmu í¬ë§· ì ìš©

* **ëª©í‘œ**: ë°ì´í„° ë¡œë”© ì‹œê°„ ìµœì†Œí™”, GPU ë©”ëª¨ë¦¬ ì ìœ ìœ¨ ì ˆê°
* **ë°©ë²•**:

  * Parquet í¬ë§·ìœ¼ë¡œ ë³€í™˜ (ì—´ ê¸°ë°˜ ì €ì¥)
  * í•„ìš”í•œ ì—´ë§Œ ë¡œë“œí•˜ì—¬ DataLoader êµ¬ì„±
  * DDP í•™ìŠµì—ì„œë„ columnar shardë¡œ ë³‘ë ¬ I/O ì§€ì›

### 3. DEM (Data Efficiency Method)

* **ëª©í‘œ**: ì—¬ëŸ¬ ë„ë©”ì¸ë³„ ë°ì´í„°ì…‹ì„ íš¨ê³¼ì ìœ¼ë¡œ í†µí•©
* **ë°©ë²•**:

  * ê° ë„ë©”ì¸ë³„ë¡œ ë¯¸ë‹ˆ ëª¨ë¸ í›ˆë ¨
  * í•´ë‹¹ ëª¨ë¸ë“¤ì˜ ì°¨ì´ê°’(difference vector)ì„ ê³„ì‚°
  * ì ì ˆí•œ ê°€ì¤‘ì¹˜ë¡œ ë³‘í•©í•´ ì „ì²´ ëª¨ë¸ ìƒì„±

---

## ğŸ“Š ê¸°ëŒ€ íš¨ê³¼

| í•­ëª©        | ê¸°ëŒ€ ìˆ˜ì¹˜                |
| --------- | -------------------- |
| ë°ì´í„° ìš©ëŸ‰ ê°ì†Œ | ìµœëŒ€ 50% â†“             |
| í›ˆë ¨ ë¹„ìš© ì ˆê°  | DEM ê¸°ì¤€ 70\~90% â†“     |
| ë¡œë”© ì†ë„ ê°œì„   | ê¸°ì¡´ JSONL ëŒ€ë¹„ ìµœëŒ€ 5Ã— â†‘  |
| ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±   | ìµœëŒ€ 80% ì ˆê° (Youmu ê¸°ì¤€) |
| ì„±ëŠ¥ í–¥ìƒ     | MMLU ê¸°ì¤€ ìµœëŒ€ 15% â†‘     |

---

## ğŸ—“ï¸ ì¼ì • (ì˜ˆì •)

| ë‹¨ê³„                 | ê¸°ê°„     | ì£¼ìš” ì‚°ì¶œë¬¼                  |
| ------------------ | ------ | ----------------------- |
| Phase 1: ì¤‘ë³µ ì œê±°     | 1ì£¼ì°¨    | dedupëœ í•œêµ­ì–´ ë§ë­‰ì¹˜          |
| Phase 2: í¬ë§· ë³€í™˜     | 2ì£¼ì°¨    | Parquet í¬ë§· ë³€í™˜ ì™„ë£Œ        |
| Phase 3: DEM ëª¨ë¸ í•™ìŠµ | 3\~4ì£¼ì°¨ | ê° ë„ë©”ì¸ë³„ ëª¨ë¸, ë³‘í•©ëœ ëª¨ë¸       |
| Phase 4: í†µí•© í…ŒìŠ¤íŠ¸    | 5ì£¼ì°¨    | end-to-end íŒŒì´í”„ë¼ì¸ ì„±ëŠ¥ ë³´ê³ ì„œ |

---

## ğŸ“Œ ì°¸ê³  ë¬¸í—Œ ë° ê¸°ìˆ  ì¶œì²˜

* SlimPajama: [https://www.cerebras.ai/blog/slimpajama-a-627b-token-cleaned-and-deduplicated-version-of-redpajama](https://www.cerebras.ai/blog/slimpajama-a-627b-token-cleaned-and-deduplicated-version-of-redpajama)
* Youmu: [https://mlsys.org/media/mlsys-2025/Slides/3272.pdf](https://mlsys.org/media/mlsys-2025/Slides/3272.pdf)
* DEM: [https://arxiv.org/abs/2406.15570](https://arxiv.org/abs/2406.15570)
